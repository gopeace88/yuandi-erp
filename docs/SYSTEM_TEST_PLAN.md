# 시스템 테스트 계획서

## 1. 테스트 개요

### 1.1 목적
YUANDI Collection Management System의 전체 기능을 검증하고, 실제 업무 환경에서의 시스템 안정성과 데이터 무결성을 확인한다.

### 1.2 테스트 범위
- **데이터베이스**: 테스트 데이터 생성 및 무결성 검증
- **업무 플로우**: 상품 등록 → 주문 접수 → 배송 관리 전체 프로세스
- **기능 테스트**: 모든 핵심 기능 및 엣지 케이스
- **성능 테스트**: 대량 데이터 처리 능력

### 1.3 테스트 데이터 규모
- 상품: 100건 이상
- 주문: 1,000건 이상  
- 송장: 500건 이상
- 고객: 300명 이상
- 거래: 2,000건 이상

## 2. 테스트 절차

### 2.1 Phase 1: 환경 준비
1. 기존 데이터베이스 백업
2. 테스트 데이터베이스 초기화
3. Supabase RLS 정책 확인
4. Storage 버킷 준비

### 2.2 Phase 2: 데이터 생성
1. **상품 마스터 생성** (100건)
   - 카테고리별 균등 분배
   - 재고 수량 다양화
   - 가격대별 분포

2. **고객 데이터 생성** (300명)
   - 한국/중국 고객 혼합
   - 다양한 배송 지역

3. **주문 데이터 생성** (1,000건)
   - 상품별 주문 분산
   - 다양한 주문 상태
   - 시간대별 분포

4. **송장 데이터 생성** (500건)
   - 배송 완료/진행중 혼합
   - 택배사별 분산
   - 사진 첨부 테스트

### 2.3 Phase 3: 무결성 검증
1. **참조 무결성**
   - 주문-상품 관계
   - 주문-송장 관계
   - 재고-판매 일치성

2. **비즈니스 규칙**
   - 재고 마이너스 방지
   - 주문 상태 전이
   - 금액 계산 정확성

3. **데이터 일관성**
   - 캐시북 잔액
   - 재고 수량
   - 통계 수치

### 2.4 Phase 4: 기능 테스트
1. **핵심 기능**
   - 주문 생성/수정/취소
   - 재고 입출고
   - 송장 등록
   - 배송 추적

2. **보조 기능**
   - 엑셀 내보내기
   - 이미지 업로드
   - 주소 검증
   - 통계 대시보드

3. **사용자별 기능**
   - 관리자 전체 기능
   - 주문관리자 제한 기능
   - 배송관리자 제한 기능
   - 고객 조회 기능

## 3. 테스트 시나리오

### 3.1 정상 시나리오
```
1. 상품 등록 → 재고 입고 → 주문 접수 → 결제 확인 → 배송 준비 → 송장 등록 → 배송 완료
```

### 3.2 예외 시나리오
```
1. 재고 부족 시 주문
2. 중복 주문 방지
3. 취소/환불 처리
4. 배송 지연/실패
5. 데이터 충돌 처리
```

### 3.3 부하 시나리오
```
1. 동시 다중 주문
2. 대량 엑셀 내보내기
3. 다중 이미지 업로드
4. 동시 재고 차감
```

## 4. 검증 항목

### 4.1 데이터 검증
| 항목 | 검증 내용 | 기준값 |
|-----|---------|--------|
| 상품 SKU | 중복 없음 | 0 |
| 주문번호 | 순차 생성 | 연속성 |
| 재고 수량 | 음수 없음 | ≥ 0 |
| 캐시북 잔액 | 거래 합계 일치 | 100% |
| PCCC | 형식 준수 | P/M + 12자리 |

### 4.2 성능 검증
| 항목 | 목표값 | 임계값 |
|-----|--------|--------|
| 페이지 로딩 | < 2초 | < 3초 |
| 주문 처리 | < 1초 | < 2초 |
| 엑셀 생성 (1000건) | < 5초 | < 10초 |
| 이미지 업로드 (10MB) | < 10초 | < 20초 |
| 검색 응답 | < 0.5초 | < 1초 |

### 4.3 기능 검증
- [ ] 상품 CRUD 작업
- [ ] 주문 상태 관리
- [ ] 재고 실시간 반영
- [ ] 송장 등록/조회
- [ ] 배송 추적
- [ ] 엑셀 내보내기
- [ ] 이미지 업로드
- [ ] 주소 검증
- [ ] 권한별 접근 제어
- [ ] 다국어 지원

## 5. 테스트 도구

### 5.1 데이터 생성
- `test-data-generator.ts`: 테스트 데이터 자동 생성
- `db-seeder.ts`: 데이터베이스 시딩

### 5.2 검증 도구
- `db-integrity-checker.ts`: 무결성 검증
- `performance-monitor.ts`: 성능 모니터링
- `e2e-test-runner.ts`: E2E 테스트 실행

### 5.3 모니터링
- Supabase Dashboard: 실시간 DB 모니터링
- Browser DevTools: 네트워크/성능 분석
- Console Logs: 에러 추적

## 6. 문제 대응

### 6.1 레벨 1: 경미한 문제
- UI 표시 오류
- 번역 누락
- 스타일 불일치
→ **대응**: 즉시 수정, 테스트 계속

### 6.2 레벨 2: 중요한 문제
- 기능 오작동
- 데이터 불일치
- 성능 저하
→ **대응**: 수정 후 해당 기능 재테스트

### 6.3 레벨 3: 치명적 문제
- 데이터 손실
- 시스템 중단
- 보안 취약점
→ **대응**: 테스트 중단, 전체 재시작

## 7. 테스트 일정

| 단계 | 작업 | 예상 시간 | 상태 |
|-----|-----|----------|------|
| 1 | 환경 준비 | 30분 | 대기 |
| 2 | 데이터 생성 | 2시간 | 대기 |
| 3 | 무결성 검증 | 1시간 | 대기 |
| 4 | 기능 테스트 | 3시간 | 대기 |
| 5 | 성능 테스트 | 1시간 | 대기 |
| 6 | 문서화 | 30분 | 대기 |

## 8. 성공 기준

### 8.1 필수 조건
- ✅ 모든 데이터 무결성 검증 통과
- ✅ 핵심 기능 100% 작동
- ✅ 성능 목표값 달성
- ✅ 치명적 오류 0건

### 8.2 권장 조건
- ⚡ 모든 성능 목표값 달성
- 🎯 사용성 개선사항 도출
- 📊 상세 테스트 보고서 생성

## 9. 리스크 관리

| 리스크 | 가능성 | 영향도 | 대응 방안 |
|--------|--------|--------|-----------|
| DB 연결 실패 | 낮음 | 높음 | 환경변수 확인, 재연결 |
| 테스트 데이터 오염 | 중간 | 중간 | 격리된 테스트 DB 사용 |
| API 제한 초과 | 낮음 | 중간 | Rate limiting 적용 |
| Storage 용량 부족 | 낮음 | 낮음 | 이전 테스트 파일 정리 |

## 10. 테스트 결과 문서화

### 10.1 테스트 로그
- 각 단계별 실행 결과
- 발견된 문제 및 해결 방법
- 성능 측정 데이터

### 10.2 개선 권고사항
- 기능 개선 제안
- 성능 최적화 방안
- 사용성 개선 아이디어

### 10.3 최종 보고서
- 전체 테스트 요약
- 주요 지표 달성률
- 운영 준비 상태 평가

---

**작성일**: 2024년 1월
**작성자**: YUANDI System Test Team
**버전**: 1.0