<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>언어 전환 테스트</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .button {
            padding: 10px 20px;
            margin: 10px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .button:hover {
            background: #2563eb;
        }

        .info {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .current-locale {
            font-weight: bold;
            color: #059669;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>🌐 언어 전환 테스트</h1>

        <div class="info">
            <p><strong>현재 언어:</strong> <span id="current-locale" class="current-locale">-</span></p>
            <p><strong>localStorage 값:</strong> <span id="storage-value">-</span></p>
        </div>

        <div>
            <button class="button" onclick="setLanguage('ko')">🇰🇷 한국어로 변경</button>
            <button class="button" onclick="setLanguage('zh-CN')">🇨🇳 중국어로 변경</button>
        </div>

        <div style="margin-top: 20px;">
            <button class="button" onclick="goToSettings()" style="background: #059669;">⚙️ 설정 페이지로 이동</button>
            <button class="button" onclick="goToDashboard()" style="background: #7c3aed;">📊 대시보드로 이동</button>
        </div>

        <div class="info">
            <h3>📝 테스트 방법:</h3>
            <ol>
                <li>위 버튼으로 언어를 변경</li>
                <li>설정 페이지나 대시보드로 이동</li>
                <li>해당 페이지가 선택한 언어로 표시되는지 확인</li>
                <li>브라우저 새로고침(F5) 후에도 언어가 유지되는지 확인</li>
            </ol>
        </div>
    </div>

    <script>
        function updateDisplay() {
            const locale = localStorage.getItem('yuandi-preferred-locale') || 'ko';
            document.getElementById('current-locale').textContent = locale === 'ko' ? '한국어' : '中文';
            document.getElementById('storage-value').textContent = locale;
        }

        function setLanguage(lang) {
            localStorage.setItem('yuandi-preferred-locale', lang);
            window.dispatchEvent(new CustomEvent('localeChange', {
                detail: { locale: lang }
            }));
            updateDisplay();
            alert(`언어가 ${lang === 'ko' ? '한국어' : '中文'}로 변경되었습니다!`);
        }

        function goToSettings() {
            window.location.href = '/dashboard/settings';
        }

        function goToDashboard() {
            window.location.href = '/dashboard';
        }

        // 페이지 로드 시 현재 상태 표시
        updateDisplay();

        // 언어 변경 이벤트 리스너
        window.addEventListener('localeChange', updateDisplay);
        window.addEventListener('storage', updateDisplay);
    </script>
</body>

</html>